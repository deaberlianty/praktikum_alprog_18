#include <stdio.h>			//library standar
#include <stdlib.h>			//menkonversi string menjadi integer
#include <string.h>

struct gaji {
    float gaji_total;
    float gaji_pokok;
	float gaji_lembur; 
    float waktu_lembur; 
	float waktu_pokok;
	float total_waktu;
} perhitungan_gaji;

int validation();
void hitung();
void rincian();
void perulangan();
void clean();
    
void hitung(){
	printf("\t\t Masukkan Jam Kerja Anda: ");
	validation(&perhitungan_gaji.total_waktu);
	if(perhitungan_gaji.total_waktu>=8){
		perhitungan_gaji.waktu_pokok = 8;
		perhitungan_gaji.waktu_lembur = perhitungan_gaji.total_waktu - perhitungan_gaji.waktu_pokok;
		perhitungan_gaji.gaji_pokok = 10625*8;
		perhitungan_gaji.gaji_lembur = perhitungan_gaji.waktu_lembur * (10625*8);
	}else{
		perhitungan_gaji.waktu_pokok = perhitungan_gaji.total_waktu;
		perhitungan_gaji.gaji_pokok= 10.625*perhitungan_gaji.total_waktu;
		perhitungan_gaji.gaji_lembur = 0;
	}
	perhitungan_gaji.gaji_total = perhitungan_gaji.gaji_pokok + perhitungan_gaji.gaji_lembur;
	rincian();
}
void rincian(){
    system("cls || clear");
	printf("\t\t===========================================================");
	printf("\n\t\t|*|                     ***RINCIAN***                   |*|");
	printf("\n\t\t|*|-----------------------------------------------------|*|");
	printf("\n\t\t|*|\t\tWaktu kerja\t: %.2f\t\t\t|*|", perhitungan_gaji.total_waktu);
	printf("\n\t\t|*|\t\tjam pokok\t: %.2f\t\t\t|*|", perhitungan_gaji.waktu_pokok);
	printf("\n\t\t|*|\t\tJam lembur\t: %.2f\t\t\t|*|", perhitungan_gaji.waktu_lembur);
	printf("\n\t\t|*|\t\tGaji pokok\t: %.3lf\t\t|*|", perhitungan_gaji.gaji_pokok);
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
	if(perhitungan_gaji.total_waktu>8){
		printf("\n\t\t|*|\t\tRincian\t\t: 8*10.625 \t\t|*|\t");
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
		printf("\n\t\t|*|\t\tGaji lembur\t: %.3lf\t\t|*|\t", perhitungan_gaji.gaji_lembur);
		printf("\n\t\t|*|\t\tRincian\t: waktu_lembur * 8*10.625\t|*|");
	}else{
		printf("\n\t\t|*|\t\tRincian\t: waktu_pokok*10.625\t|*|");
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
		printf("\n\t\t|*|\t\tGaji lembur\t: %.3lf\t\t\t|*|\t", perhitungan_gaji.gaji_lembur);
	}
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
	printf("\n\t\t|*|\t\tTotal Gaji\t: %.3lf\t\t|*|\n", perhitungan_gaji.gaji_total);
	printf("\n\t\t===========================================================\n");
	perulangan();
}

void perulangan() {
	char pilihan[2];
	printf("\n\t\tApakah anda ingin mengulang program ini? (y/n)?\n\n");
	scanf("%s", &pilihan);
	if(strcmp(pilihan, "y")==0){
		system("cls");
		main();
	}else if(strcmp(pilihan, "n")==0){
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
		printf("\n\t\t|*|\t================    Terima Kasih    ================\t|*|");
		exit(0);
	}else{
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
		printf("\t\t|*|                #### 404 NOT FOUND ####            |*|\n");
		printf("\t\t|*|                   Silahkan PILIH y/n              |*|\n");
	printf("\n\t\t|*|-----------------------------------------------------|*|\n");
		perulangan();
	}

    system("cls || clear");
}

void clean(){
	while (getchar() != '\n');
}

int validation(float *var){
    if (scanf("%f", var) !=1){
		clean();
        printf("\t\tMohon maaf input SALAH!\n");
        printf("\t\tSilakan Masukkan ulang (angka)\n");
        printf("\t\tPilihan Anda: ");
        validation(var);
    }
    return 1;
}

int main() {												
	printf("\t\t===========================================================\n");
    printf("\t\t|                       SELAMAT DATANG                    |\n");   
    printf("\t\t|                    Program Hitung Gaji                  |\n");
    printf("\t\t|                     Penggunaan struct                   |\n");
	printf("\t\t===========================================================\n");
    hitung();
    return 0;
}
